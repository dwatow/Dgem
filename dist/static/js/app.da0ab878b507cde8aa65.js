webpackJsonp([1],{"+skl":function(t,e){},"/rwm":function(t,e){},"9EUY":function(t,e){},EUW7:function(t,e){},H7QK:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},a,!1,function(t){n("NoCs")},null,null).exports,o=n("Xxa5"),i=n.n(o),c=n("exGp"),u=n.n(c),d=n("/ocq"),p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("Layout",[n("Sider",{attrs:{breakpoint:"md",collapsible:"","collapsed-width":78},model:{value:t.isCollapsed,callback:function(e){t.isCollapsed=e},expression:"isCollapsed"}},[n("Menu",{class:t.menuitemClasses,attrs:{"active-name":"1-2",theme:"dark",width:"auto"}},[n("Submenu",{attrs:{name:"2"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"person"}}),t._v("\n                      個人中心\n                  ")],1),t._v(" "),n("router-link",{attrs:{to:"notStart"}},[n("MenuItem",{attrs:{name:"2-1"}},[t._v("基本資料")])],1),t._v(" "),n("router-link",{attrs:{to:"ChildAccount"}},[n("MenuItem",{attrs:{name:"2-2"}},[t._v("子母帳號")])],1),t._v(" "),n("router-link",{attrs:{to:"notStart"}},[n("MenuItem",{attrs:{name:"2-3"}},[t._v("更換手機")])],1),t._v(" "),n("router-link",{attrs:{to:"notStart"}},[n("MenuItem",{attrs:{name:"2-4"}},[t._v("夢想卡解涷")])],1)],2),t._v(" "),n("Submenu",{attrs:{name:"3"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"leaf"}}),t._v("\n                      夢寶龍樹種區\n                  ")],1),t._v(" "),n("router-link",{attrs:{to:"BuyDragon"}},[n("MenuItem",{attrs:{name:"3-1"}},[t._v("夢寶龍購買")])],1),t._v(" "),n("router-link",{attrs:{to:"Dragon"}},[n("MenuItem",{attrs:{name:"3-2"}},[t._v("夢寶龍激活")])],1),t._v(" "),n("router-link",{attrs:{to:"Tree"}},[n("MenuItem",{attrs:{name:"3-3"}},[t._v("夢寶樹激活")])],1),t._v(" "),n("router-link",{attrs:{to:"Activating"}},[n("MenuItem",{attrs:{name:"3-4"}},[t._v("開採狀況")])],1)],2),t._v(" "),n("Submenu",{attrs:{name:"4"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"social-usd"}}),t._v("\n                      寶石卡片管理\n                  ")],1),t._v(" "),n("router-link",{attrs:{to:"Wallet"}},[n("MenuItem",{attrs:{name:"4-3"}},[t._v("寶石庫存")])],1),t._v(" "),n("router-link",{attrs:{to:"notStart"}},[n("MenuItem",{attrs:{name:"4-1"}},[t._v("外部轉帳")])],1),t._v(" "),n("router-link",{attrs:{to:"notStart"}},[n("MenuItem",{attrs:{name:"4-2"}},[t._v("平台轉帳")])],1),t._v(" "),n("router-link",{attrs:{to:"notStart"}},[n("MenuItem",{attrs:{name:"4-4"}},[t._v("進出明細")])],1),t._v(" "),n("router-link",{attrs:{to:"TransferUSD"}},[n("MenuItem",{attrs:{name:"4-5"}},[t._v("美金轉帳")])],1)],2),t._v(" "),n("router-link",{attrs:{to:"Group"}},[n("MenuItem",{attrs:{name:"5-1"}},[n("Icon",{attrs:{type:"person-stalker"}}),t._v("\n                家族開採狀況\n              ")],1)],1)],1),t._v(" "),n("div",{attrs:{slot:"trigger"},slot:"trigger"})],1),t._v(" "),n("Layout",[n("Header",{staticClass:"layout-header-bar"}),t._v(" "),n("Content",{style:{margin:"20px",background:"#fff",minHeight:"220px"}},[n("keep-alive",[n("router-view")],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=n("VU/8")({data:function(){return{isCollapsed:!1}},computed:{menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":""]}}},p,!1,function(t){n("9EUY")},null,null).exports,m={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"noStart"},[e("img",{attrs:{src:"https://fakeimg.pl/350x200/fff/000/?text=Comming soon...&font=bebas",alt:""}})])}]};var h=n("VU/8")({},m,!1,function(t){n("m1Mv")},null,null).exports,g=n("gRE1"),f=n.n(g),v={data:function(){var t=this;return{columns1:[{title:"ID",key:"id",width:50},{title:"夢寶龍的擁有者",key:"owner_name",minWidth:150},{title:"夢寶龍激活對象",key:"user_name",minWidth:150},{title:"是否激活",key:"activated",minWidth:100},{title:"操作",key:"operate",width:200,render:function(e,n){return e("div",[e("Dropdown",{props:{trigger:"click"},class:"defaultStyle",on:{"on-click":function(e){n.row.operate=t.dropdownItems.filter(function(t){return t.id===e}).shift()}}},[e("span",[n.row.operate.id+" "+n.row.operate.name+" ",e("Icon",{props:{type:"arrow-down-b"},style:{marginRight:"5px"}})]),e("DropdownMenu",{slot:"list"},t.dropdownItems.sort(function(t,e){return t.id-e.id}).map(function(t){return e("DropdownItem",{props:{name:t.id,disabled:n.row.activated}},t.id+" "+t.name)}))])])}},{title:"動作",key:"action",width:150,align:"center",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small",disabled:n.row.activated},on:{click:function(){var e=n.row.id;t.activate({data:{user_id:n.row.operate.id},idDragon:e})}}},"激活")])}}]}},computed:{dragon:function(){return this.$store.getters.isExist("dragon","dragon")?this.$store.getters.dragon.map(function(t){return t.owner_name=t.owner&&t.owner.name||"未指定",t.user_name=t.user&&t.user.name||"未指定",t.operate={id:"",name:"選一個對象"},t}):[]},paging:function(){return this.$store.getters.paging("dragon","dragon")},dropdownItems:function(){var t={};return t[""+this.$store.getters.self.id]=this.$store.getters.self,this.$store.getters.allChildAccount.forEach(function(e){t[e.id]=e}),this.$store.getters.downlines.forEach(function(e){t[e.id]=e}),f()(t).filter(function(t){return!t.activated})}},methods:{changePage:function(t){var e=this;return u()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("goToDragonPage",{nextIndex:t});case 2:case"end":return n.stop()}},n,e)}))()},activate:function(t){var e=this;return u()(i.a.mark(function n(){var r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=e.$store.getters.paging("dragon","dragon").curr_page,n.next=4,e.$store.dispatch("activateDragon",t);case 4:e.$store.dispatch("goToDragonPage",{nextIndex:r}),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:e.$store.dispatch("userDownLines",{idUser:e.$store.getters.myId}),e.$store.dispatch("allChildAccount"),e.$store.dispatch("whoAmI");case 12:case"end":return n.stop()}},n,e,[[0,7]])}))()}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Page",{attrs:{total:t.paging.total,"page-size":t.paging.pre_page,simple:"",size:"small"},on:{"on-change":function(e){t.changePage(e)}}}),t._v(" "),n("Table",{attrs:{stripe:"",columns:t.columns1,data:t.dragon}})],1)},staticRenderFns:[]};var x=n("VU/8")(v,w,!1,function(t){n("nhNy")},null,null).exports,_={data:function(){var t=this;return{columns1:[{title:"夢寶樹的擁有者",key:"owner_name",minWidth:120},{title:"夢寶樹激活對象",key:"user_name",minWidth:120},{title:"是否激活",key:"activated",minWidth:50},{title:"操作",key:"operate",width:200,render:function(e,n){return e("div",[e("Dropdown",{props:{trigger:"click",disabled:!0},class:"defaultStyle",on:{"on-click":function(e){n.row.operate=t.dropdownItems.filter(function(t){return t.id===e}).shift()}}},[e("span",[n.row.operate.id+" "+n.row.operate.name+" ",e("Icon",{props:{type:"arrow-down-b"},style:{marginRight:"5px"}})]),e("DropdownMenu",{slot:"list"},t.dropdownItems.sort(function(t,e){return t.id-e.id}).map(function(t){return e("DropdownItem",{props:{name:t.id,disabled:n.row.activated}},t.id+" "+t.name)}))])])}},{title:"動作",key:"action",width:150,align:"center",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small",disabled:n.row.activated},on:{click:function(){var e=n.row.id;t.activate({data:{user_id:n.row.operate.id},idTree:e})}}},"激活")])}}]}},computed:{tree:function(){return this.$store.getters.isExist("tree","tree")?this.$store.getters.tree.map(function(t){return t.owner_name=t.owner&&t.owner.name||"未指定",t.user_name=t.user&&t.user.name||"未指定",t.operate={id:"",name:"選一個對象"},t}):[]},paging:function(){return this.$store.getters.paging("tree","tree")},dropdownItems:function(){var t={};return t[""+this.$store.getters.self.id]=this.$store.getters.self,this.$store.getters.allChildAccount.forEach(function(e){t[e.id]=e}),f()(t).filter(function(t){return t.activated})}},methods:{changePage:function(t){var e=this;return u()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("goToTreePage",{nextIndex:t});case 2:case"end":return n.stop()}},n,e)}))()},buy:function(){var t=this;return u()(i.a.mark(function e(){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={user_id:"1"},r=t.$store.getters.paging("tree","tree").curr_page,e.next=4,t.$store.dispatch("buyTree",{data:n});case 4:t.$store.dispatch("goToTreePage",{nextIndex:r});case 5:case"end":return e.stop()}},e,t)}))()},activate:function(t){var e=this;return u()(i.a.mark(function n(){var r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.$store.getters.paging("tree","tree").curr_page,n.next=3,e.$store.dispatch("activateTree",t);case 3:e.$store.dispatch("goToTreePage",{nextIndex:r});case 4:case"end":return n.stop()}},n,e)}))()}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Button",{attrs:{type:"error"},on:{click:function(e){t.buy()}}},[t._v("買一顆全新夢寶樹")]),t._v(" "),n("Page",{attrs:{total:t.paging.total,"page-size":t.paging.pre_page,simple:"",size:"small"},on:{"on-change":function(e){t.changePage(e)}}}),t._v(" "),n("Table",{attrs:{stripe:"",columns:t.columns1,data:t.tree}})],1)},staticRenderFns:[]};var y=n("VU/8")(_,k,!1,function(t){n("sCj6")},null,null).exports,$={data:function(){return{columnsDragon:[{title:"夢寶龍的擁有者",key:"owner_name",minWidth:150},{title:"夢寶龍激活對象",key:"user_name",minWidth:150},{title:"是否激活",key:"activated",minWidth:100}],columnsTree:[{title:"夢寶樹的擁有者",key:"owner_name",minWidth:120},{title:"夢寶樹激活對象",key:"user_name",minWidth:120},{title:"夢寶樹剩餘開採數量",key:"remain",minWidth:170},{title:"夢寶樹原始開採數量",key:"capacity",minWidth:170},{title:"夢寶樹目前開採進度",key:"progress",minWidth:200},{title:"激活",key:"activated",minWidth:120}]}},computed:{dragon:function(){return this.$store.getters.isExist("dragon","activeDragon")?this.$store.getters.activeDragon.map(function(t){return t.owner_name=t.owner&&t.owner.name||"未指定",t.user_name=t.user&&t.user.name||"未指定",t}):[]},tree:function(){return this.$store.getters.isExist("tree","activeTree")?this.$store.getters.activeTree.map(function(t){return t.owner_name=t.owner&&t.owner.name||"未指定",t.user_name=t.user&&t.user.name||"未指定",t}):[]},pagingDragon:function(){return this.$store.getters.paging("dragon","activeDragon")},pagingTree:function(){return this.$store.getters.paging("tree","activeTree")}},methods:{changeDragonPage:function(t){var e=this;return u()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("goToActiveDragonPage",{nextIndex:t});case 2:case"end":return n.stop()}},n,e)}))()},changeTreePage:function(t){var e=this;return u()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("goToActiveTreePage",{nextIndex:t});case 2:case"end":return n.stop()}},n,e)}))()}}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("夢寶龍")]),t._v(" "),n("Page",{attrs:{total:t.pagingDragon.total,"page-size":t.pagingDragon.pre_page,simple:"",size:"small"},on:{"on-change":function(e){t.changeDragonPage(e)}}}),t._v(" "),n("Table",{attrs:{stripe:"",columns:t.columnsDragon,data:t.dragon}}),t._v(" "),n("h1",[t._v("夢寶樹")]),t._v(" "),n("Page",{attrs:{total:t.pagingTree.total,"page-size":t.pagingTree.pre_page,simple:"",size:"small"},on:{"on-change":function(e){t.changeTreePage(e)}}}),t._v(" "),n("Table",{attrs:{stripe:"",columns:t.columnsTree,data:t.tree}})],1)},staticRenderFns:[]};var D=n("VU/8")($,T,!1,function(t){n("vxEI")},null,null).exports,I={data:function(){return{columns1:[{title:"ID",key:"id",width:50},{title:"使用者名稱",key:"name",minWidth:150},{title:"使用者信箱",key:"email",minWidth:270},{title:this.$store.getters.gems[0],key:"gem0",minWidth:100},{title:this.$store.getters.gems[1],key:"gem1",minWidth:100},{title:this.$store.getters.gems[2],key:"gem2",minWidth:100},{title:this.$store.getters.gems[3],key:"gem3",minWidth:100},{title:"是否被凍結帳號",key:"frozen",minWidth:150},{title:"是否已激活",key:"activated",minWidth:150}]}},computed:{childAccount:function(){return this.$store.getters.isExist("user","childAccount")?this.$store.getters.childAccount:[]},paging:function(){return this.$store.getters.paging("user","childAccount")}},methods:{changePage:function(t){var e=this;return u()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("goToChildAccountPage",{nextIndex:t});case 2:case"end":return n.stop()}},n,e)}))()},addChildAccount:function(){var t=this;return u()(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$store.getters.paging("user","childAccount").curr_page,e.next=3,t.$store.dispatch("addChildAccount");case 3:t.$store.dispatch("goToChildAccountPage",{currIndex:n});case 4:case"end":return e.stop()}},e,t)}))()}}},A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("子帳號")]),t._v(" "),n("Button",{attrs:{type:"error"},on:{click:function(e){t.addChildAccount()}}},[t._v("增加子帳號")]),t._v(" "),n("Button",{attrs:{type:"primary"},on:{click:function(e){t.callbackMe()}}},[t._v("一鍵召回")]),t._v(" "),n("Page",{attrs:{total:t.paging.total,"page-size":t.paging.pre_page,simple:"",size:"small"},on:{"on-change":function(e){t.changePage(e)}}}),t._v(" "),n("Table",{attrs:{stripe:"",columns:t.columns1,data:t.childAccount}})],1)},staticRenderFns:[]};var b=n("VU/8")(I,A,!1,function(t){n("/rwm")},null,null).exports,W={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("Table",{attrs:{stripe:"",columns:this.columns1,data:this.wallet}})],1)},staticRenderFns:[]};var C=n("VU/8")({data:function(){return{columns1:[{title:"寶石種類",key:"gem_name",minWidth:120},{title:"寶石種類",key:"amount",minWidth:120}]}},computed:{wallet:function(){var t=this;return this.$store.getters.isExist("wallet","wallet")?this.$store.getters.wallet.map(function(e){return e.gem_name=t.$store.getters.gems[e.gem],e}):[]}}},W,!1,function(t){n("Usyk")},null,null).exports,P={data:function(){var t=this;return{columns1:[{title:"ID",key:"id",width:50},{title:"夢寶龍的擁有者",key:"owner_name",minWidth:150},{title:"夢寶龍激活對象",key:"user_name",minWidth:150},{title:"是否激活",key:"activated",minWidth:50},{title:"動作",key:"action",maxWidth:100,render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small",disabled:n.row.activated},on:{click:function(){var e=n.row.id;t.buy({data:{owner_id:t.$store.getters.self.id},idDragon:e})}}},"購買")])}}]}},computed:{allDragon:function(){return this.$store.getters.isExist("dragon","allDragon")?this.$store.getters.allDragon.map(function(t){return t.owner_name=t.owner&&t.owner.name||"未指定",t.user_name=t.user&&t.user.name||"未指定",t.operate={id:"",name:"選一個對象"},t}):[]},paging:function(){return this.$store.getters.paging("dragon","allDragon")}},methods:{changePage:function(t){var e=this;return u()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("goToAllDragonPage",{nextIndex:t});case 2:case"end":return n.stop()}},n,e)}))()},buy:function(t){var e=this;return u()(i.a.mark(function n(){var r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.$store.getters.paging("dragon","allDragon").curr_page,n.next=3,e.$store.dispatch("buyDragon",t);case 3:e.$store.dispatch("goToAllDragonPage",{nextIndex:r});case 4:case"end":return n.stop()}},n,e)}))()}}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Page",{attrs:{total:t.paging.total,"page-size":t.paging.pre_page,simple:"",size:"small"},on:{"on-change":function(e){t.changePage(e)}}}),t._v(" "),n("Table",{attrs:{stripe:"",columns:t.columns1,data:t.allDragon}})],1)},staticRenderFns:[]};var E=n("VU/8")(P,U,!1,function(t){n("H7QK")},null,null).exports,S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("自己")]),t._v(" "),n("Table",{attrs:{stripe:"",columns:t.columnsUser,data:t.self}}),t._v(" "),n("h1",[t._v("下線")]),t._v(" "),n("Table",{attrs:{stripe:"",columns:t.columnsUser,data:t.downlines}})],1)},staticRenderFns:[]};var L=n("VU/8")({data:function(){return{columnsUser:[{title:"ID",key:"id",width:50},{title:"e-mail",key:"email",minWidth:150},{title:"是否涷結",key:"frozen",minWidth:100},{title:"是否子帳號",key:"activated",minWidth:100},{title:"是否激活",key:"activated",minWidth:100}]}},computed:{self:function(){return[this.$store.getters.self]},downlines:function(){return this.$store.getters.downlines}}},S,!1,function(t){n("ZfN3")},null,null).exports,R={data:function(){return{id:0,amount:0,busy:!1}},computed:{currUSD:function(){return this.$store.getters.isExist("wallet","wallet")?this.$store.getters.wallet.filter(function(t){return 4===t.gem}).pop().amount:0},myId:function(){return this.$store.getters.myId}},methods:{transferTo:function(){var t=this;return u()(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.busy=!0,n={user_id:t.id,amount:t.amount},e.next=5,t.$store.dispatch("TransferUSD",{data:n});case 5:return e.next=7,t.$store.dispatch("WalletPage");case 7:t.busy=!1,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t.busy=!1;case 13:case"end":return e.stop()}},e,t,[[0,10]])}))()}}},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p"),n("h4",[t._v("轉帳對象")]),t._v(" "),n("Input",{staticClass:"input-id",staticStyle:{width:"300px"},attrs:{placeholder:""+t.myId,clearable:""},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}}),t._v(" "),n("p"),t._v(" "),n("p"),n("h4",[t._v("目前額度")]),t._v(" "),n("span",{staticClass:"currUSD"},[t._v(t._s(t.currUSD))]),t._v(" "),n("p"),t._v(" "),n("p"),n("h4",[t._v("轉出額度")]),t._v(" "),n("Input",{staticClass:"input-amount",staticStyle:{width:"300px"},attrs:{placeholder:"0",clearable:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v(" "),n("p"),t._v(" "),n("p",[n("Alert",{attrs:{type:"error"}},[t._v("接下來的行為，將不可回溯!!")])],1),t._v(" "),n("Button",{attrs:{type:"error"},on:{click:function(e){t.transferTo()}}},[t._v("轉帳")]),t._v(" "),t.busy?n("Spin",[t._v("轉帳中...")]):t._e()],1)},staticRenderFns:[]};var z=n("VU/8")(R,M,!1,function(t){n("EUW7")},"data-v-90389f7c",null).exports,Q=n("QlUI"),G=n.n(Q),q={data:function(){return{showButton:!1}},mounted:function(){var t=this;return u()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("CreateQRcode");case 2:t.renderQRcode(),setTimeout(function(){t.isLoginSuccess()},3500);case 4:case"end":return e.stop()}},e,t)}))()},methods:{test:function(){var t=this;return u()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("Login");case 2:return t.$store.dispatch("userDownLines",{idUser:t.$store.getters.myId}),t.$store.dispatch("allChildAccount"),e.next=6,t.$store.dispatch("WalletPage");case 6:t.$router.push("/Main");case 7:case"end":return e.stop()}},e,t)}))()},renderQRcode:function(){var t=G()(0,"L");t.addData(""+this.$store.getters.qrcode),t.make(),document.querySelector("#placeHolder").innerHTML=t.createImgTag(10),this.showButton=!0},isLoginSuccess:function(){var t=this;return u()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("LoginQRcode");case 3:return t.$store.dispatch("userDownLines",{idUser:t.$store.getters.myId}),t.$store.dispatch("allChildAccount"),e.next=7,t.$store.dispatch("WalletPage");case 7:t.$router.push("/Main"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),setTimeout(t.isLoginSuccess,2e3);case 13:case"end":return e.stop()}},e,t,[[0,10]])}))()}}},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.showButton?n("button",{attrs:{type:"button",name:"button"},on:{click:function(e){t.test()}}},[t._v("Demo 專用假裝掃 QR code 的登入")]):t._e(),t._v(" "),n("div",{attrs:{id:"placeHolder"}})])},staticRenderFns:[]};var F=n("VU/8")(q,B,!1,function(t){n("uNbx")},null,null).exports,N=this;r.default.use(d.a);var V,H=new d.a({routes:[{path:"/",redirect:"/QRcodeLogin"},{path:"/QRcodeLogin",name:"QRcodeLogin",component:F},{path:"/Main",name:"Main",component:l,redirect:"/Main/notStart",children:[{path:"notStart",name:"notStart",component:h},{path:"Dragon",name:"Dragon",component:x},{path:"Tree",name:"Tree",component:y},{path:"Activating",name:"Activating",component:D},{path:"ChildAccount",name:"ChildAccount",component:b},{path:"Wallet",name:"Wallet",component:C},{path:"TransferUSD",name:"TransferUSD",component:z},{path:"BuyDragon",name:"BuyDragon",component:E},{path:"Group",name:"Group",component:L}]}]});H.beforeEach((V=u()(i.a.mark(function t(e,n,r){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n.name,e.name),null!==n.name||"QRcodeLogin"===e.name||void 0!==H.app.$store&&0!==H.app.$store.getters.token.length||H.push("/QRcodeLogin"),void 0===H.app.$store){t.next=27;break}t.t0=e.name,t.next="Activating"===t.t0?6:"BuyDragon"===t.t0?10:"Tree"===t.t0?13:"Dragon"===t.t0?13:"ChildAccount"===t.t0?13:"Group"===t.t0?19:"Wallet"===t.t0?22:"TransferUSD"===t.t0?22:"QRcodeLogin"===t.t0?25:27;break;case 6:return t.next=8,H.app.$store.dispatch("goToActiveDragonPage",{nextIndex:1});case 8:return H.app.$store.dispatch("goToActiveTreePage",{nextIndex:1}),t.abrupt("break",27);case 10:return t.next=12,H.app.$store.dispatch("goToAllDragonPage",{nextIndex:1});case 12:return t.abrupt("break",27);case 13:return t.next=15,H.app.$store.dispatch("goTo"+e.name+"Page",{nextIndex:1});case 15:return H.app.$store.dispatch("userDownLines",{idUser:H.app.$store.getters.myId}),H.app.$store.dispatch("allChildAccount"),H.app.$store.dispatch("whoAmI"),t.abrupt("break",27);case 19:return t.next=21,H.app.$store.dispatch("userDownLines",{idUser:H.app.$store.getters.myId});case 21:return t.abrupt("break",27);case 22:return t.next=24,H.app.$store.dispatch("WalletPage");case 24:return t.abrupt("break",27);case 25:return t.next=27,H.app.$store.dispatch("CreateQRcode");case 27:r();case 28:case"end":return t.stop()}},t,N)})),function(t,e,n){return V.apply(this,arguments)}));var j=H,O=n("NYxO"),Y=n("woOf"),K=n.n(Y),Z={state:{childAccount:{},userDownLines:{},allChildAccount:{},mySelf:{}},getters:{childAccount:function(t){return t.childAccount.data},downlines:function(t){return t.userDownLines.downlines},self:function(t){return t.mySelf},allChildAccount:function(t){return t.allChildAccount},myId:function(t){return t.mySelf.id}},mutations:{allChildAccount:function(t,e){t.allChildAccount=e},setChildAccount:function(t,e){t.childAccount=e},setUserDownLines:function(t,e){t.userDownLines=e},IAm:function(t,e){t.mySelf=e}},actions:{allChildAccount:function(t){var e=this,n=t.dispatch,r=t.commit,a=t.getters;return u()(i.a.mark(function t(){var s,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.myId,t.next=3,n("GET","/api/users/"+s+"/child-accounts?hello=world&activated=1");case 3:o=t.sent,r("allChildAccount",o);case 5:case"end":return t.stop()}},t,e)}))()},goToChildAccountPage:function(t,e){var n=this,r=t.dispatch,a=t.commit,s=t.getters,o=e.nextIndex;return u()(i.a.mark(function t(){var e,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=o||1,e=s.myId,t.next=4,r("GET","/api/users/"+e+"/child-accounts?page="+o);case 4:return c=t.sent,t.next=7,r("accountAndWallet",{array:c.data});case 7:c.data=t.sent,a("setChildAccount",c);case 9:case"end":return t.stop()}},t,n)}))()},addChildAccount:function(t){var e=this,n=t.dispatch,r=t.commit,a=t.getters;return u()(i.a.mark(function t(){var s,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.myId,t.next=3,n("POST",{path:"/api/users/"+s+"/child-accounts"});case 3:return o=t.sent,t.next=6,n("accountAndWallet",{array:o.data});case 6:o.data=t.sent,r("setChildAccount",o);case 8:case"end":return t.stop()}},t,e)}))()},userDownLines:function(t,e){var n=this,r=t.dispatch,a=t.commit,s=e.idUser;return u()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r("GET","/api/users/"+s);case 2:e=t.sent,a("setUserDownLines",e);case 4:case"end":return t.stop()}},t,n)}))()},childAccountWallet:function(t,e){var n=this,r=t.dispatch,a=(t.commit,e.idUser);return u()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r("GET","/api/users/"+a+"/wallets?page=1");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,n)}))()},accountAndWallet:function(t,e){var n,r=this,a=t.dispatch,s=(t.commit,[]);return e.array.forEach((n=u()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a("childAccountWallet",{idUser:e.id});case 2:t.sent.data.forEach(function(t){e["gem"+t.gem]=e.activated?t.amount:""}),s.push(K()({},e));case 5:case"end":return t.stop()}},t,r)})),function(t){return n.apply(this,arguments)})),s},whoAmI:function(t){var e=this,n=t.dispatch,r=t.commit;return u()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("GET","/api/users/me");case 2:a=t.sent,r("IAm",a);case 4:case"end":return t.stop()}},t,e)}))()}}},J=n("Dd8w"),X=n.n(J),tt=n("//Fk"),et=n.n(tt),nt=n("mtWM"),rt=n.n(nt),at={LoginQRcode:function(t){var e=this,n=t.dispatch,r=t.commit,a=t.getters;return u()(i.a.mark(function t(){var s,o,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={"Content-Type":"application/json"},o={grant_type:"qrcode",id:""+a.qrcodeUser.id,password:""+a.qrcodeUser.password,client_id:"2",client_secret:"vZ08ruaFRkqnDgzWJhnUImmIBtNON19YAzdKWSRF"},t.next=4,rt.a.post(a.host+"/oauth/token",o,{headers:s});case 4:return c=t.sent,r("token",c.data),t.next=8,n("whoAmI");case 8:et.a.resolve();case 9:case"end":return t.stop()}},t,e)}))()},CreateQRcode:function(t){var e=this,n=t.commit,r=t.getters;return u()(i.a.mark(function t(){var a,s,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={Accept:"application/json"},s={id:10,password:"h%1`2{A/A",qrcode_url:"https://uim.dreamsgem.net/applets?action=/applets/dreamsgem/auth/scan-login/10"},t.next=4,rt.a.post(r.host+"/api/qrcodes",s,{headers:a});case 4:o=t.sent,n("setQRcodeData",o.data);case 6:case"end":return t.stop()}},t,e)}))()},GET:function(t,e){var n=this,r=t.getters;return u()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt.a.get(""+r.host+e,{headers:X()({},r.headers)});case 2:if(200!==(a=t.sent).status){t.next=7;break}return t.abrupt("return",a.data);case 7:return t.abrupt("return",a);case 8:case"end":return t.stop()}},t,n)}))()},POST:function(t,e){var n=this,r=t.getters,a=e.path,s=e.data;return u()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt.a.post(""+r.host+a,s,{headers:X()({},r.headers,{"Content-Type":"application/json"})});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,n)}))()},PUT:function(t,e){var n=this,r=t.getters,a=e.path,s=e.data;return u()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt.a.put(""+r.host+a,s,{headers:X()({},r.headers,{"Content-Type":"application/json"})});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,n)}))()}},st={state:{allDragon:{},dragon:{},activeDragon:{}},getters:{allDragon:function(t){return t.allDragon.data},dragon:function(t){return t.dragon.data},activeDragon:function(t){return t.activeDragon.data}},mutations:{setAllDragonList:function(t,e){t.allDragon=e},setDragonList:function(t,e){t.dragon=e},setActiveDragonList:function(t,e){t.activeDragon=e}},actions:{buyDragon:function(t,e){var n=this,r=t.dispatch,a=e.idDragon,s=e.data;return u()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r("PUT",{path:"/api/dragons/"+a,data:s});case 2:case"end":return t.stop()}},t,n)}))()},activateDragon:function(t,e){var n=this,r=t.dispatch,a=e.idDragon,s=e.data;return u()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r("PUT",{path:"/api/dragons/"+a,data:s});case 2:case"end":return t.stop()}},t,n)}))()},goToAllDragonPage:function(t,e){var n=this,r=t.dispatch,a=t.commit,s=e.nextIndex;return u()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=s||1,t.next=3,r("GET","/api/dragons?page="+s);case 3:e=t.sent,a("setAllDragonList",e);case 5:case"end":return t.stop()}},t,n)}))()},goToDragonPage:function(t,e){var n=this,r=t.dispatch,a=t.commit,s=t.getters,o=e.nextIndex;return u()(i.a.mark(function t(){var e,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=o||1,e=s.myId,t.next=4,r("GET","/api/dragons?owner_id="+e+"&activated=0&page="+o);case 4:c=t.sent,a("setDragonList",c);case 6:case"end":return t.stop()}},t,n)}))()},goToActiveDragonPage:function(t,e){var n=this,r=t.dispatch,a=t.commit,s=t.getters,o=e.nextIndex;return u()(i.a.mark(function t(){var e,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=o||1,e=s.myId,t.next=4,r("GET","/api/dragons?user_id="+e+"&page="+o);case 4:c=t.sent,a("setActiveDragonList",c);case 6:case"end":return t.stop()}},t,n)}))()}}},ot={state:{tree:{},activeTree:{}},getters:{tree:function(t){return t.tree.data},activeTree:function(t){return t.activeTree.data}},mutations:{setTreeList:function(t,e){t.tree=e},setActiveTreeList:function(t,e){t.activeTree=e}},actions:{buyTree:function(t,e){var n=this,r=t.dispatch,a=t.getters,s=e.data;return u()(i.a.mark(function t(){var e,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.myId,o="/api/users/"+e+"/trees",t.next=4,r("POST",{path:o,data:s});case 4:case"end":return t.stop()}},t,n)}))()},activateTree:function(t,e){var n=this,r=t.dispatch,a=t.getters,s=e.idTree,o=e.data;return u()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.myId,t.next=3,r("PUT",{path:"/api/users/"+e+"/trees/"+s,data:o});case 3:case"end":return t.stop()}},t,n)}))()},goToTreePage:function(t,e){var n=this,r=t.dispatch,a=t.commit,s=t.getters,o=e.nextIndex;return u()(i.a.mark(function t(){var e,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=o||1,e=s.myId,t.next=4,r("GET","/api/users/"+e+"/trees?owner_id="+e+"&activated=0&page="+o);case 4:c=t.sent,a("setTreeList",c);case 6:case"end":return t.stop()}},t,n)}))()},goToActiveTreePage:function(t,e){var n=this,r=t.dispatch,a=t.commit,s=t.getters,o=e.nextIndex;return u()(i.a.mark(function t(){var e,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=o||1,e=s.myId,t.next=4,r("GET","/api/users/"+e+"/trees?user_id="+e+"&page="+o);case 4:c=t.sent,a("setActiveTreeList",c);case 6:case"end":return t.stop()}},t,n)}))()}}},it={state:{wallet:{}},getters:{wallet:function(t){return t.wallet.data},idUsdWallet:function(t,e){return e.isExist("wallet","wallet")?t.wallet.data.filter(function(t){return 4===t.gem}).shift().id:0}},mutations:{setWallet:function(t,e){t.wallet=e}},actions:{WalletPage:function(t){var e=this,n=t.dispatch,r=t.commit,a=t.getters;return u()(i.a.mark(function t(){var s,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.myId,t.next=3,n("GET","/api/users/"+s+"/wallets?page=1");case 3:o=t.sent,r("setWallet",o);case 5:case"end":return t.stop()}},t,e)}))()},TransferUSD:function(t,e){var n=this,r=t.dispatch,a=t.getters,s=e.data;return u()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.idUsdWallet,t.next=3,r("POST",{path:"/api/wallets/"+e+"/transfers",data:s});case 3:case"end":return t.stop()}},t,n)}))()}}};r.default.use(O.a);var ct=new O.a.Store({state:{host:"http://dreamsgem-staging.ap-northeast-1.elasticbeanstalk.com",token:"",token_type:"",qrCode:{}},getters:{isExist:function(t){return function(e,n){return!!t[e][n].data}},isLogin:function(t){return 0!==t.token.length},token:function(t){return t.token},host:function(t){return t.host},paging:function(t){return function(e,n){return{total:t[e][n].total,pre_page:t[e][n].per_page,curr_page:t[e][n].current_page}}},headers:function(t){return{Accept:"application/json",Authorization:t.token_type+" "+t.token}},gems:function(){return["七彩寶石","多喜寶石","多福寶石","多財寶石","美金"]},qrcode:function(t){return t.qrCode.qrcode_url},qrcodeUser:function(t){return t.qrCode}},mutations:{token:function(t,e){t.token=e.access_token,t.token_type=e.token_type},setQRcodeData:function(t,e){t.qrCode=e}},actions:at,modules:{user:Z,dragon:st,tree:ot,wallet:it}}),ut=n("BTaQ"),dt=n.n(ut);n("+skl");r.default.use(dt.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:j,store:ct,components:{App:s},template:"<App/>"})},NoCs:function(t,e){},Usyk:function(t,e){},ZfN3:function(t,e){},m1Mv:function(t,e){},nhNy:function(t,e){},sCj6:function(t,e){},uNbx:function(t,e){},vxEI:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.da0ab878b507cde8aa65.js.map